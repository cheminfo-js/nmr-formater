!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.nmrRange=n():t.nmrRange=n()}(this,function(){return function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function i(t,n,e,i,l,u){d(),r(t,l,u);for(var s=t.length,f=0;s>f;f++){if(n)var g=t[f];else var g=t[s-f-1];g&&(d(),o(g,e),a(g,i))}}function r(t,n,e){"NMR SPEC"==t.type?(e.nucleus&&(v+=p(e.nucleus)),v+=" NMR",(n||e.observe)&&(v+=" (",e.observe&&(v+=(1*e.observe).toFixed(0)+" MHz",n&&(v+=", ")),n&&(v+=c(n)),v+=")"),v+=" δ "):"IR"==t.type?v+=" IR ":"MASS"==t.type&&(v+=" MASS ")}function o(t,n){var e,i=0,r=0,o=0;t.from&&(i="string"==typeof t.from?parseFloat(t.from):t.from),t.to&&(r="string"==typeof t.to?parseFloat(t.to):t.to),t.signal[0].delta?o="string"==typeof t.signal[0].delta?parseFloat(t.signal[0].delta):t.signal[0].delta:e=!0,e===!0||"m"==t.signal[0].multiplicity&&b===!0?t.from&&t.to?v+=r>i?i.toFixed(n)+"-"+r.toFixed(n):r.toFixed(n)+"-"+i.toFixed(n):t.signal[0].delta&&(v+="?"):t.signal[0].delta?v+=o.toFixed(n):t.from&&t.to&&(v+=((i+r)/2).toFixed(n))}function a(t,n){h="",s(t),l(t),f(t,n),u(t),h.length>0&&(v+=" ("+h+")")}function l(t){t.pubIntegration?(m(),h+=t.pubIntegration):t.integral&&(m(),h+=t.integral.toFixed(0)+" H")}function u(t){t.signal[0].pubAssignment?(m(),h+=g(t.signal[0].pubAssignment)):t.signal[0].assignment&&(m(),h+=g(t.signal[0].assignment))}function s(t){t.signal[0].pubMultiplicity?(m(),h+=t.pubMultiplicity):t.signal[0].multiplicity&&(m(),h+=t.signal[0].multiplicity)}function f(t,n){if(t.signal[0].j){for(var e=t.signal[0].j,i="<i>J</i> = ",r=0;r<e.length;r++){var o=e[r].coupling;i.length>11&&(i+=", "),i+=o.toFixed(n)}m(),h+=i+" Hz"}}function g(t){return t=t.replace(/([0-9])/g,"<sub>$1</sub>"),t=t.replace(/\"([^\"]*)\"/g,"<i>$1</i>")}function c(t){return t=t.replace(/([0-9])/g,"<sub>$1</sub>")}function p(t){return t=t.replace(/([0-9])/g,"<sup>$1</sup>")}function d(){v.length>0&&!v.match(/ $/)&&(v+=", ")}function m(){h.length>0&&!h.match(", $")&&(h+=", ")}var x=e(1),v="",h="",y="",b=!1;t.exports.nmrJ=function(t,n){for(var e,i="",r=Object.assign({},{separator:", ",nbDecimal:2},n),o=0;o<t.length;o++)e=t[o],e.length>11&&(e+=r.separator),i+=e.multiplicity+" "+e.coupling.toFixed(r.nbDecimal);return i},t.exports.peak2Vector=function(t,n){var e=n||{},i=e.from,r=e.to,o=e.nbPoints||16384,a=e.fnName||"gaussian",l=e.nWidth||4;if(!i){i=Number.MAX_VALUE;for(var u=0;u<t.length;u++)t[u].x-t[u].width*l<i&&(i=t[u].x-t[u].width*l)}if(!r){r=Number.MIN_VALUE;for(var u=0;u<t.length;u++)t[u].x+t[u].width*l>r&&(r=t[u].x+t[u].width*l)}for(var s=new Array(o),f=new Array(o),g=(r-i)/(o-1),u=0;o>u;u++)s[u]=i+u*g,f[u]=0;var c="intensity";t[0].y&&(c="y");for(var u=0;u<t.length;u++){var p=t[u];if(p.x>i&&p.x<r){var d=Math.round((p.x-i)/g),m=Math.round(p.width*l/g);if("gaussian"==a)for(var x=d-m;d+m>x;x++)x>=0&&o>x&&(f[x]+=p[c]*Math.exp(-.5*Math.pow((p.x-s[x])/(p.width/2),2)));else for(var x=d-m;d+m>x;x++)x>=0&&o>x&&(f[x]+=p[c]*Math.pow(p.width,2)/(Math.pow(p.x-s[x],2)+Math.pow(p.width/2,2)))}}return{x:s,y:f}},t.exports.range2Vector=function(n,e){for(var i=[],r=0;r<n.length;r++)for(var o=n[r],a=0;a<o.signal.length;a++)i=i.concat(o.signal[a].peak);return t.exports.peak2Vector(i,e)},t.exports.toACS=function(t,n){if(t[0].delta1)return x.toACS(t,n);v="",h="",y="";var e=null;return n&&n.solvent&&(e=n.solvent),n&&void 0!=n.rangeForMultiplet&&(b=n.rangeForMultiplet),n&&n.ascending?t.sort(function(t,n){return n.from-t.from}):t.sort(function(t,n){return t.from-n.from}),t.type="NMR SPEC",n&&"1H"==n.nucleus&&i(t,!1,2,1,e,n),n&&"13C"==n.nucleus&&i(t,!1,1,0,e,n),v.length>0&&(v+="."),v},t.exports.toNMRSignal=function(t){return null}},function(t,n){"use strict";function e(t,n,e,a,l){p(),i(t,l);for(var u=t.length,s=0;u>s;s++){if(n)var f=t[s];else var f=t[u-s-1];f&&(p(),r(f,e),o(f,a))}}function i(t,n){"NMR SPEC"==t.type?(t[0].nucleus&&(m+=c(t[0].nucleus)),m+=" NMR",(n||t[0].observe)&&(m+=" (",t[0].observe&&(m+=(1*t[0].observe).toFixed(0)+" MHz",n&&(m+=", ")),n&&(m+=g(n)),m+=")"),m+=" δ "):"IR"==t.type?m+=" IR ":"MASS"==t.type&&(m+=" MASS ")}function r(t,n){var e=0,i=0,r=0;t.integralData.from&&(e="string"==typeof t.integralData.from?parseFloat(t.integralData.from):t.integralData.from),t.integralData.to&&(i="string"==typeof t.integralData.to?parseFloat(t.integralData.to):t.integralData.to),t.delta1&&(r="string"==typeof t.delta1?parseFloat(t.delta1):t.delta1),t.asymmetric===!0||"m"==t.multiplicity&&h===!0?t.integralData.from&&t.integralData.to?m+=i>e?e.toFixed(n)+"-"+i.toFixed(n):i.toFixed(n)+"-"+sttotoFixed(n):t.delta1&&(m+=r.toFixed(n)):t.delta1?m+=r.toFixed(n):t.integralData.from&&t.integralData.to&&(m+=((e+i)/2).toFixed(n))}function o(t,n){x="",u(t),a(t),s(t,n),l(t),x.length>0&&(m+=" ("+x+")")}function a(t){t.pubIntegration?(d(),x+=t.pubIntegration):t.integralData&&(d(),x+=t.integralData.value.toFixed(0)+" H")}function l(t){t.pubAssignment?(d(),x+=f(t.pubAssignment)):t.assignment&&(d(),x+=f(t.assignment))}function u(t){t.pubMultiplicity?(d(),x+=t.pubMultiplicity):t.multiplicity&&(d(),x+=t.multiplicity)}function s(t,n){if(t.nmrJs){for(var e="<i>J</i> = ",i=0;i<t.nmrJs.length;i++){var r=t.nmrJs[i].coupling;e.length>11&&(e+=", "),e+=r.toFixed(n)}d(),x+=e+" Hz"}}function f(t){return t=t.replace(/([0-9])/g,"<sub>$1</sub>"),t=t.replace(/\"([^\"]*)\"/g,"<i>$1</i>")}function g(t){return t=t.replace(/([0-9])/g,"<sub>$1</sub>")}function c(t){return t=t.replace(/([0-9])/g,"<sup>$1</sup>")}function p(){m.length>0&&!m.match(/ $/)&&(m+=", ")}function d(){x.length>0&&!x.match(", $")&&(x+=", ")}var m="",x="",v="",h=!1;t.exports.toACS=function(t,n){m="",x="",v="";var i=null;return n&&n.solvent&&(i=n.solvent),n&&void 0!=n.rangeForMultiplet&&(h=n.rangeForMultiplet),n&&n.ascending?t.sort(function(t,n){return n.delta1-t.delta1}):t.sort(function(t,n){return t.delta1-n.delta1}),t.type="NMR SPEC","1H"==t[0].nucleus?e(t,!1,2,1,i):"13C"==t[0].nucleus&&e(t,!1,1,0,i),m.length>0&&(m+="."),m}}])});
//# sourceMappingURL=nmr-range.min.js.map